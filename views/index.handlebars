<h1>Burgers to Eat!</h1>

<h2>Undevoured Burgers:</h2>

<ul>
    {{#each burgers}}
    {{#unless devoured}}
    {{!-- render burger onto list --}}
    <li>
        <span>üçî</span>
        <p>{{this.id}}. {{this.burger_name}} </p>
        <button data-id="{{this.id}}" class="eatBurger">Devour!</button>
    </li>
    {{/unless}}
    {{/each}}
</ul>

<h2>Devoured Burgers</h2>

<ul>
    {{#each burgers}}
    {{#if devoured}}
    {{!-- render burger onto list --}}
    <li>
        <span>üçî</span>
        <p>{{this.id}}. {{this.burger_name}} </p>
    </li>
    {{/if}}
    {{/each}}
</ul>

<h2>Add a Burger!</h2>
<form class="create-form">

    <div class="form-group">
        <label for="ca">Burger Name:</label>
        <input type="text" id="ca" name="name">
    </div>

    <button type="submit">Add Burger</button>
</form>

<script>
    $('.eatBurger').on('click', function (event) {
        event.preventDefault();
        var id = $(this).data('id');
        $.ajax("/api/burgers/" + id, {
            type: "PUT",
        }).then(function () {
            console.log(id + "burger moved to devoured list");
            location.reload();
        }
        );
    })

    $('.create-form').on('submit', function (event) {
        event.preventDefault();
        var newBurger = {
            name: $('#ca').val().trim()
        };
        console.log(newBurger);
        $.post("/api/burgers", newBurger).then(function () {
            console.log("created new burger");
            location.reload();
        });
    })
</script>